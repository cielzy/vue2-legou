{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { index } from '@/api/home/index.js';\nimport { goodsInfo } from '@/api/cart/index.js';\nexport default {\n  data() {\n    return {\n      banner: [],\n      brandList: [],\n      channel: [],\n      newGoods: [],\n      hotGoods: [],\n      topicList: [],\n      newCategoryList: [],\n      location: '' // 定位\n    };\n  },\n\n  methods: {\n    // 点击跳转搜索页\n    goSearch() {\n      this.$router.push('/home/search');\n    },\n    // 点击跳转新品首发 或者人气推荐具体页面\n    goNewOrHotGoods(num) {\n      this.$router.push({\n        name: 'newOrHot',\n        params: {\n          id: num\n        }\n      });\n    },\n    // 点击跳转分页列表页\n    goDetail(id) {\n      this.$router.push({\n        name: 'categories',\n        params: {\n          id: id\n        }\n      });\n    },\n    // 点击制造商跳转至供应商详情\n    goProductors(id) {\n      this.$router.push({\n        name: 'productors',\n        params: {\n          id: id\n        }\n      });\n    },\n    // 点击商品跳转至详情\n    goGoods(id) {\n      this.$router.push({\n        name: 'goodsdetail',\n        params: {\n          id: id\n        }\n      });\n    },\n    // 点击话题item跳转至话题详情\n    goTopic(id) {\n      this.$router.push({\n        name: 'topicdatail',\n        params: {\n          id: id\n        }\n      });\n    },\n    // 点击更多好物跳转至分页详情\n    goCategory(id) {\n      this.$router.push({\n        name: 'categories',\n        params: {\n          id: id\n        }\n      });\n    },\n    // 点击地址进入地图\n    goMap() {\n      this.$router.push('/map');\n    }\n  },\n  created() {\n    index().then(res => {\n      this.banner = res.banner;\n      this.brandList = res.brandList;\n      this.channel = res.channel;\n      this.newGoods = res.newGoods;\n      this.hotGoods = res.hotGoods;\n      this.topicList = res.topicList;\n      this.newCategoryList = res.newCategoryList;\n    });\n    const openId = localStorage.getItem('openId');\n    goodsInfo({\n      openId\n    }).then(res => {\n      // 购物车length\n      const length = res.data.length;\n      localStorage.setItem('length', length);\n      // 定位\n      this.location = this.$store.state.city;\n    });\n  },\n  mounted() {\n    AMap.plugin('AMap.CitySearch', function () {\n      var citySearch = new AMap.CitySearch();\n      citySearch.getLocalCity(function (status, result) {\n        if (status === 'complete' && result.info === 'OK') {\n          // 查询成功，result即为当前所在城市信息\n          console.log(result);\n        }\n      });\n    });\n  }\n};","map":{"version":3,"mappings":";AA2GA;AACA;AACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;QAAAC;QAAAC;UAAAC;QAAA;MAAA;IACA;IACA;IACAC;MACA;QAAAH;QAAAC;UAAAC;QAAA;MAAA;IACA;IACA;IACAE;MACA;QAAAJ;QAAAC;UAAAC;QAAA;MAAA;IACA;IACA;IACAG;MACA;QACAL;QACAC;UAAAC;QAAA;MACA;IACA;IACA;IACAI;MACA;QAAAN;QAAAC;UAAAC;QAAA;MAAA;IACA;IACA;IACAK;MACA;QAAAP;QAAAC;UAAAC;QAAA;MAAA;IACA;IACA;IACAM;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAAC;IAAA;MACA;MACA;MACAC;MACA;MACA;IACA;EACA;EACAC;IACAC;MACA;MACAC;QACA;UACA;UACAC;QACA;MACA;IACA;EACA;AACA","names":["data","banner","brandList","channel","newGoods","hotGoods","topicList","newCategoryList","location","methods","goSearch","goNewOrHotGoods","name","params","id","goDetail","goProductors","goGoods","goTopic","goCategory","goMap","created","index","goodsInfo","openId","localStorage","mounted","AMap","citySearch","console"],"sourceRoot":"src/views/home","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- 定位 搜索框 -->\r\n    <div class=\"header\">\r\n      <h3 id=\"address\" @click=\"goMap\">{{ location }}</h3>\r\n      <van-search placeholder=\"请输入搜索关键词\" class=\"input\" @click=\"goSearch\" />\r\n    </div>\r\n    <!-- 轮播图 -->\r\n    <div class=\"swiper\">\r\n      <van-swipe class=\"my-swipe\" :autoplay=\"3000\" indicator-color=\"black\">\r\n        <van-swipe-item v-for=\"item in banner\" :key=\"item.id\">\r\n          <img :src=\"item.image_url\" :alt=\"item.name\" class=\"swiperItem\" />\r\n        </van-swipe-item>\r\n      </van-swipe>\r\n    </div>\r\n    <!-- 简单的分页列表 -->\r\n    <div class=\"icon\">\r\n      <div class=\"iconItem\" v-for=\"item in channel\" :key=\"item.id\" @click=\"goDetail(item.id)\">\r\n        <img :src=\"item.icon_url\" />\r\n        <p>{{ item.name }}</p>\r\n      </div>\r\n    </div>\r\n    <!-- 中间的间隙 -->\r\n    <div class=\"empty\"></div>\r\n    <!-- 品牌制造商 -->\r\n    <div class=\"title\">\r\n      <h3>品牌制造商直供</h3>\r\n      <div class=\"producer\">\r\n        <div class=\"profucerItem\" v-for=\"item in brandList\" :key=\"item.id\" @click=\"goProductors(item.id)\">\r\n          <img :src=\"item.new_pic_url\" :alt=\"item.name\" />\r\n          <p class=\"name\">{{ item.name }}</p>\r\n          <p class=\"price\">{{ item.floor_price }}元起</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"empty\"></div>\r\n    <!-- 新品首发title -->\r\n    <div class=\"newGoods\" @click=\"goNewOrHotGoods(1)\">\r\n      <h4>新品首发</h4>\r\n      <p>查看全部</p>\r\n    </div>\r\n    <div class=\"empty\"></div>\r\n    <!-- 新品首发item -->\r\n    <div class=\"newGoodsItem\">\r\n      <ul>\r\n        <li v-for=\"item in newGoods\" :key=\"item.id\" @click=\"goGoods(item.id)\">\r\n          <img :src=\"item.list_pic_url\" alt=\"\" />\r\n          <p class=\"name\">{{ item.name }}</p>\r\n          <p class=\"desc\">{{ item.goods_brief }}</p>\r\n          <p class=\"price\">￥{{ item.retail_price }}</p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"empty\"></div>\r\n    <!-- 人气推荐title -->\r\n    <div class=\"hotGoods\" @click=\"goNewOrHotGoods(2)\">\r\n      <h4>人气推荐.好物推荐</h4>\r\n      <p>查看全部</p>\r\n    </div>\r\n    <div class=\"empty\"></div>\r\n    <!-- 人气推荐item -->\r\n    <div class=\"hotGoodsItem\">\r\n      <ul>\r\n        <li v-for=\"item in hotGoods\" :key=\"item.id\" @click=\"goGoods(item.id)\">\r\n          <img :src=\"item.list_pic_url\" alt=\"\" />\r\n          <p class=\"name\">{{ item.name }}</p>\r\n          <p class=\"desc\">{{ item.goods_brief }}</p>\r\n          <p class=\"price\">￥{{ item.retail_price }}</p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"empty\"></div>\r\n    <!-- 话题精选 -->\r\n    <div class=\"topic\">\r\n      <p class=\"title1\">专题精选<van-icon name=\"arrow\" /></p>\r\n      <ul>\r\n        <li v-for=\"item in topicList\" :key=\"item.id\" @click=\"goTopic(item.id)\">\r\n          <img :src=\"item.item_pic_url\" />\r\n          <p class=\"price\">{{ item.price_info }}元起</p>\r\n          <p class=\"title\">{{ item.title }}</p>\r\n          <p class=\"subtitle\">{{ item.subtitle }}</p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <!-- 好物推荐 -->\r\n    <div class=\"category\" v-for=\"item in newCategoryList\" :key=\"item.id\">\r\n      <div class=\"title\">{{ item.name }}好物</div>\r\n      <div class=\"categortItem\">\r\n        <ul>\r\n          <li v-for=\"subItem in item.goodsList\" :key=\"subItem.id\" @click=\"goGoods(subItem.id)\">\r\n            <img :src=\"subItem.list_pic_url\" />\r\n            <p class=\"name\">{{ subItem.name }}</p>\r\n            <p class=\"price\">￥{{ subItem.retail_price }}</p>\r\n          </li>\r\n          <li @click=\"goCategory(item.id)\">\r\n            <div class=\"good\">{{ item.name }}好物</div>\r\n            <img src=\"../../assets/images/rightbig.png\" alt=\"\" class=\"img1\" />\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"footer\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { index } from '@/api/home/index.js'\r\nimport { goodsInfo } from '@/api/cart/index.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      banner: [],\r\n      brandList: [],\r\n      channel: [],\r\n      newGoods: [],\r\n      hotGoods: [],\r\n      topicList: [],\r\n      newCategoryList: [],\r\n      location: '' // 定位\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击跳转搜索页\r\n    goSearch() {\r\n      this.$router.push('/home/search')\r\n    },\r\n    // 点击跳转新品首发 或者人气推荐具体页面\r\n    goNewOrHotGoods(num) {\r\n      this.$router.push({ name: 'newOrHot', params: { id: num } })\r\n    },\r\n    // 点击跳转分页列表页\r\n    goDetail(id) {\r\n      this.$router.push({ name: 'categories', params: { id: id } })\r\n    },\r\n    // 点击制造商跳转至供应商详情\r\n    goProductors(id) {\r\n      this.$router.push({ name: 'productors', params: { id: id } })\r\n    },\r\n    // 点击商品跳转至详情\r\n    goGoods(id) {\r\n      this.$router.push({\r\n        name: 'goodsdetail',\r\n        params: { id: id }\r\n      })\r\n    },\r\n    // 点击话题item跳转至话题详情\r\n    goTopic(id) {\r\n      this.$router.push({ name: 'topicdatail', params: { id: id } })\r\n    },\r\n    // 点击更多好物跳转至分页详情\r\n    goCategory(id) {\r\n      this.$router.push({ name: 'categories', params: { id: id } })\r\n    },\r\n    // 点击地址进入地图\r\n    goMap() {\r\n      this.$router.push('/map')\r\n    }\r\n  },\r\n  created() {\r\n    index().then(res => {\r\n      this.banner = res.banner\r\n      this.brandList = res.brandList\r\n      this.channel = res.channel\r\n      this.newGoods = res.newGoods\r\n      this.hotGoods = res.hotGoods\r\n      this.topicList = res.topicList\r\n      this.newCategoryList = res.newCategoryList\r\n    })\r\n    const openId = localStorage.getItem('openId')\r\n    goodsInfo({ openId }).then(res => {\r\n      // 购物车length\r\n      const length = res.data.length\r\n      localStorage.setItem('length', length)\r\n      // 定位\r\n      this.location = this.$store.state.city\r\n    })\r\n  },\r\n  mounted() {\r\n    AMap.plugin('AMap.CitySearch', function () {\r\n      var citySearch = new AMap.CitySearch()\r\n      citySearch.getLocalCity(function (status, result) {\r\n        if (status === 'complete' && result.info === 'OK') {\r\n          // 查询成功，result即为当前所在城市信息\r\n          console.log(result)\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  .header {\r\n    display: flex;\r\n    margin-left: 10px;\r\n    align-items: center;\r\n    #address {\r\n      white-space: nowrap;\r\n    }\r\n    .input {\r\n      width: 90%;\r\n      margin-left: 20px;\r\n    }\r\n  }\r\n  .swiper {\r\n    .swiperItem {\r\n      width: 100%;\r\n      height: 200px;\r\n    }\r\n    ::v-deep .van-swipe__indicator {\r\n      background-color: red;\r\n    }\r\n  }\r\n  .icon {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    margin-top: 10px;\r\n    margin-bottom: 20px;\r\n    .iconItem {\r\n      img {\r\n        width: 30px;\r\n        height: 30px;\r\n      }\r\n      p {\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n  .title {\r\n    h3 {\r\n      text-align: center;\r\n      margin: 20px 0 20px 0;\r\n    }\r\n    .producer {\r\n      display: flex;\r\n      justify-content: space-around;\r\n      flex-wrap: wrap;\r\n      width: 100%;\r\n      .profucerItem {\r\n        position: relative;\r\n        width: 48%;\r\n        img {\r\n          width: 100%;\r\n        }\r\n        .name {\r\n          position: absolute;\r\n          top: 20px;\r\n          left: 5px;\r\n        }\r\n        .price {\r\n          position: absolute;\r\n          top: 55px;\r\n          left: 5px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .empty {\r\n    height: 8px;\r\n    width: 100%;\r\n    background-color: #eee;\r\n  }\r\n  .newGoods {\r\n    height: 122px;\r\n    width: 100%;\r\n    background: url('@/assets//images/bgnew.png') no-repeat;\r\n    margin: 0 auto;\r\n    background-size: 100% 100%;\r\n    h4 {\r\n      font-weight: 400;\r\n      font-size: 16px;\r\n      text-align: center;\r\n      color: #8c9bae;\r\n      padding: 30px 0;\r\n    }\r\n    p {\r\n      text-align: center;\r\n      line-height: 24px;\r\n      height: 24px;\r\n      width: 90px;\r\n      align-items: center;\r\n      background-color: #d8e4f0;\r\n      color: #8c9bae;\r\n      margin: 0 auto;\r\n      margin-top: -20px;\r\n    }\r\n  }\r\n  .footer {\r\n    margin-top: 75.04px;\r\n  }\r\n  .newGoodsItem {\r\n    ul {\r\n      width: 100%;\r\n      display: flex;\r\n      flex-wrap: nowrap;\r\n      overflow: auto;\r\n      white-space: nowrap;\r\n      li {\r\n        border-right: 1px solid #eee;\r\n        padding: 20px 10px;\r\n        width: 140px;\r\n\r\n        img {\r\n          width: 140px;\r\n          height: 140px;\r\n        }\r\n        p {\r\n          overflow: hidden; //溢出隐藏\r\n          white-space: nowrap; //禁止换行\r\n          text-overflow: ellipsis; //...\r\n          margin-left: 20px;\r\n        }\r\n        .name {\r\n          font-size: 15px;\r\n          font-weight: 700;\r\n          margin-bottom: 16px;\r\n        }\r\n        .price {\r\n          margin-top: 16px;\r\n        }\r\n        .desc {\r\n          color: #8a8a8a;\r\n          font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .hotGoods {\r\n    height: 122px;\r\n    width: 100%;\r\n    background: url('@/assets//images//bgtopic.png') no-repeat;\r\n    margin: 0 auto;\r\n    background-size: 100% 100%;\r\n    h4 {\r\n      font-weight: 400;\r\n      font-size: 16px;\r\n      text-align: center;\r\n      color: #b1a279;\r\n      padding: 30px 0;\r\n    }\r\n    p {\r\n      text-align: center;\r\n      line-height: 24px;\r\n      height: 24px;\r\n      width: 90px;\r\n      align-items: center;\r\n      background-color: #f4e9cb;\r\n      color: #8c9bae;\r\n      margin: 0 auto;\r\n      margin-top: -20px;\r\n    }\r\n  }\r\n  .hotGoodsItem {\r\n    ul {\r\n      width: 100%;\r\n      display: flex;\r\n      flex-wrap: nowrap;\r\n      overflow: auto;\r\n      white-space: nowrap;\r\n      li {\r\n        border-right: 1px solid #eee;\r\n        padding: 20px 10px;\r\n        width: 140px;\r\n\r\n        img {\r\n          width: 140px;\r\n          height: 140px;\r\n        }\r\n        p {\r\n          overflow: hidden; //溢出隐藏\r\n          white-space: nowrap; //禁止换行\r\n          text-overflow: ellipsis; //...\r\n          margin-left: 20px;\r\n        }\r\n        .name {\r\n          font-size: 15px;\r\n          font-weight: 700;\r\n          margin-bottom: 16px;\r\n        }\r\n        .price {\r\n          margin-top: 16px;\r\n        }\r\n        .desc {\r\n          color: #8a8a8a;\r\n          font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .topic {\r\n    .title1 {\r\n      text-align: center;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n      padding: 20px 0;\r\n    }\r\n    ul {\r\n      width: 100%;\r\n      display: flex;\r\n      flex-wrap: nowrap;\r\n      overflow: auto;\r\n      white-space: nowrap;\r\n      li {\r\n        display: inline-block;\r\n        padding-left: 12px;\r\n        width: 287px;\r\n        img {\r\n          width: 287px;\r\n          height: 162px;\r\n        }\r\n        p {\r\n          overflow: hidden; //溢出隐藏\r\n          white-space: nowrap; //禁止换行\r\n          text-overflow: ellipsis; //...\r\n        }\r\n        .price {\r\n          float: right;\r\n          color: #9c3232;\r\n        }\r\n        .title {\r\n          font-size: 15px;\r\n          font-weight: 600;\r\n          margin-bottom: 16px;\r\n        }\r\n        .subtitle {\r\n          font-size: 12px;\r\n          color: #8a8a8a;\r\n          padding-bottom: 30px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .category {\r\n    .title {\r\n      padding: 15px 0;\r\n      background-color: #eee;\r\n      text-align: center;\r\n    }\r\n    .categortItem {\r\n      width: 100%;\r\n      background-color: #eee;\r\n      ul {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: space-around;\r\n        li {\r\n          width: 48%;\r\n          border: 1px solid #eee;\r\n          background-color: #fff;\r\n          margin-bottom: 4px;\r\n          img {\r\n            width: 150px;\r\n            height: 150px;\r\n          }\r\n          p {\r\n            margin-left: 12px;\r\n            margin-bottom: 16px;\r\n          }\r\n          .name {\r\n            font-size: 12px;\r\n          }\r\n          .price {\r\n            color: #9c3232;\r\n          }\r\n          .good {\r\n            font-size: 16px;\r\n            text-align: center;\r\n            margin: 50px 0 30px 0;\r\n          }\r\n          .img1 {\r\n            width: 35px;\r\n            height: 35px;\r\n            margin-left: 70px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}