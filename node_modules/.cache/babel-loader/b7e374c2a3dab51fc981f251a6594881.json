{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getInfo, deleteHistory, addHistory } from '@/api/home/search/index.js';\nexport default {\n  data() {\n    return {\n      value: '',\n      hotKeywordList: [],\n      historyData: [],\n      defaultKeyword: {},\n      openId: ''\n    };\n  },\n  methods: {\n    // 点击搜索 添加关键词\n    onSearch() {\n      // keyword openId\n      addHistory({\n        openId: this.openId,\n        keyword: this.value\n      }).then(res => {\n        console.log(res);\n      });\n      this.getSearchInfo();\n    },\n    // 获取数据\n    getSearchInfo() {\n      this.openId = localStorage.getItem('openId');\n      getInfo({\n        openId: this.openId\n      }).then(res => {\n        this.hotKeywordList = res.hotKeywordList;\n        this.historyData = res.historyData;\n        this.defaultKeyword = res.defaultKeyword;\n      });\n    },\n    //  点击取消\n    onCancel() {\n      this.$router.push('/home');\n    },\n    // 点击返回\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    // 点击删除历史记录\n    deteleSearch() {\n      deleteHistory({\n        openId: this.openId\n      }).then(res => {\n        console.log(res);\n      });\n      this, this.getSearchInfo();\n    }\n  },\n  created() {\n    this.getSearchInfo();\n  }\n};","map":{"version":3,"mappings":";AA4BA;AACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACAC;QAAAH;QAAAI;MAAA;QACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACAC;QAAAP;MAAA;QACA;QACA;QACA;MACA;IACA;IACA;IACAQ;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACAC;QAAAX;MAAA;QACAK;MACA;MACA;IACA;EACA;EACAO;IACA;EACA;AACA","names":["data","value","hotKeywordList","historyData","defaultKeyword","openId","methods","onSearch","addHistory","keyword","console","getSearchInfo","getInfo","onCancel","onClickLeft","deteleSearch","deleteHistory","created"],"sourceRoot":"src/views/home/search","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- 头部导航栏 -->\r\n    <van-nav-bar title=\"乐购\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\r\n    <form action=\"/\">\r\n      <van-search v-model=\"value\" show-action :placeholder=\"defaultKeyword.keyword\" @search=\"onSearch\" @cancel=\"onCancel\" />\r\n    </form>\r\n    <!-- 历史记录 -->\r\n    <div class=\"history1\" v-if=\"historyData.length !== 0\">\r\n      <div class=\"header\">\r\n        <p>历史记录</p>\r\n        <img src=\"@/assets/images/del-address.png\" alt=\"\" @click=\"deteleSearch\" />\r\n      </div>\r\n      <div class=\"historyItem\">\r\n        <div class=\"historyItem1\" v-for=\"item in historyData\" :key=\"item.id\">{{ item.keyword }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"hotSearch\">\r\n      <p>热门搜索</p>\r\n      <div class=\"hotSearchItem\">\r\n        <div class=\"hotSearchItem1\" v-for=\"item in hotKeywordList\" :key=\"item.keyword\">{{ item.keyword }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getInfo, deleteHistory, addHistory } from '@/api/home/search/index.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      value: '',\r\n      hotKeywordList: [],\r\n      historyData: [],\r\n      defaultKeyword: {},\r\n      openId: ''\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击搜索 添加关键词\r\n    onSearch() {\r\n      // keyword openId\r\n      addHistory({ openId: this.openId, keyword: this.value }).then(res => {\r\n        console.log(res)\r\n      })\r\n      this.getSearchInfo()\r\n    },\r\n    // 获取数据\r\n    getSearchInfo() {\r\n      this.openId = localStorage.getItem('openId')\r\n      getInfo({ openId: this.openId }).then(res => {\r\n        this.hotKeywordList = res.hotKeywordList\r\n        this.historyData = res.historyData\r\n        this.defaultKeyword = res.defaultKeyword\r\n      })\r\n    },\r\n    //  点击取消\r\n    onCancel() {\r\n      this.$router.push('/home')\r\n    },\r\n    // 点击返回\r\n    onClickLeft() {\r\n      this.$router.go(-1)\r\n    },\r\n    // 点击删除历史记录\r\n    deteleSearch() {\r\n      deleteHistory({ openId: this.openId }).then(res => {\r\n        console.log(res)\r\n      })\r\n      this, this.getSearchInfo()\r\n    }\r\n  },\r\n  created() {\r\n    this.getSearchInfo()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  height: 100%;\r\n  background-color: #eee;\r\n  .history1 {\r\n    background-color: #fff;\r\n    padding: 16px;\r\n    margin-bottom: 10px;\r\n    .header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      margin: 16px 0;\r\n      img {\r\n        width: 20px;\r\n        height: 20px;\r\n      }\r\n    }\r\n    .historyItem {\r\n      display: inline-block;\r\n      .historyItem1 {\r\n        display: inline-block;\r\n        border: 1px solid;\r\n        padding: 5px;\r\n        margin: 5px 5px 5px 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  .hotSearch {\r\n    background-color: #fff;\r\n    padding: 16px;\r\n    margin-bottom: 10px;\r\n    p {\r\n      margin: 16px 0;\r\n    }\r\n    .hotSearchItem {\r\n      display: inline-block;\r\n      .hotSearchItem1 {\r\n        display: inline-block;\r\n        border: 1px solid;\r\n        padding: 5px;\r\n        margin: 5px 10px 5px 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}