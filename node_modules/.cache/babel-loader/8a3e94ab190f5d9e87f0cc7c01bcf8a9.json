{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      value: '',\n      city: '',\n      searchList: []\n    };\n  },\n  watch: {\n    value() {\n      const _this = this;\n      // JSAPI 2.0 输入提示插件名称由 AMap.Autocomplete 变更为 AMap.AutoComplete 啦！\n      AMap.plugin('AMap.AutoComplete', function () {\n        var autoOptions = {\n          //city 限定城市，默认全国\n          city: _this.city\n        };\n        // 实例化AutoComplete\n        var autoComplete = new AMap.AutoComplete(autoOptions);\n        // 根据关键字进行搜索\n        autoComplete.search(_this.value, function (status, result) {\n          // 搜索成功时，result即是对应的匹配数据\n          _this.searchList = result.tips;\n        });\n      });\n    }\n  },\n  methods: {\n    // 点击返回\n    onClickLeft() {\n      this.$router.push({\n        name: 'home'\n      });\n    }\n  },\n  mounted() {\n    const _this = this;\n    var map = new AMap.Map('container', {});\n    AMap.plugin('AMap.CitySearch', function () {\n      var citySearch = new AMap.CitySearch();\n      citySearch.getLocalCity(function (status, result) {\n        if (status === 'complete' && result.info === 'OK') {\n          // 查询成功，result即为当前所在城市信息\n          console.log(result);\n          _this.$store.commit('saveCity', result.city);\n          _this.city = result.city;\n        }\n      });\n    });\n  }\n};","map":{"version":3,"mappings":";AAiBA;EACAA;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAH;MACA;MACA;MACAI;QACA;UACA;UACAH;QACA;QACA;QACA;QACA;QACAI;UACA;UACAC;QACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;QAAAC;MAAA;IACA;EACA;EACAC;IACA;IACA;IACAN;MACA;MACAO;QACA;UACA;UACAC;UACAN;UACAA;QACA;MACA;IACA;EACA;AACA","names":["data","value","city","searchList","watch","AMap","autoComplete","_this","methods","onClickLeft","name","mounted","citySearch","console"],"sourceRoot":"src/views/map","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"box\">\r\n    <!-- 导航栏 -->\r\n    <van-sticky>\r\n      <van-nav-bar title=\"乐购\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\r\n    </van-sticky>\r\n    <van-search v-model=\"value\" placeholder=\"请输入搜索关键词\" class=\"text\" />\r\n    <!-- 搜索结果 -->\r\n    <ul class=\"result\">\r\n      <li v-for=\"item in searchList\" :key=\"item.id\" class=\"resultItem\">{{ item.name }}</li>\r\n    </ul>\r\n    <h2>显示当前位置：</h2>\r\n    <div id=\"container\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      value: '',\r\n      city: '',\r\n      searchList: []\r\n    }\r\n  },\r\n  watch: {\r\n    value() {\r\n      const _this = this\r\n      // JSAPI 2.0 输入提示插件名称由 AMap.Autocomplete 变更为 AMap.AutoComplete 啦！\r\n      AMap.plugin('AMap.AutoComplete', function () {\r\n        var autoOptions = {\r\n          //city 限定城市，默认全国\r\n          city: _this.city\r\n        }\r\n        // 实例化AutoComplete\r\n        var autoComplete = new AMap.AutoComplete(autoOptions)\r\n        // 根据关键字进行搜索\r\n        autoComplete.search(_this.value, function (status, result) {\r\n          // 搜索成功时，result即是对应的匹配数据\r\n          _this.searchList = result.tips\r\n        })\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击返回\r\n    onClickLeft() {\r\n      this.$router.push({ name: 'home' })\r\n    }\r\n  },\r\n  mounted() {\r\n    const _this = this\r\n    var map = new AMap.Map('container', {})\r\n    AMap.plugin('AMap.CitySearch', function () {\r\n      var citySearch = new AMap.CitySearch()\r\n      citySearch.getLocalCity(function (status, result) {\r\n        if (status === 'complete' && result.info === 'OK') {\r\n          // 查询成功，result即为当前所在城市信息\r\n          console.log(result)\r\n          _this.$store.commit('saveCity', result.city)\r\n          _this.city = result.city\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.box {\r\n  h2 {\r\n    position: fixed;\r\n    bottom: 200px;\r\n    padding: 0 0 15px 15px;\r\n  }\r\n  #container {\r\n    width: 100%;\r\n    height: 200px;\r\n    position: fixed;\r\n    bottom: 0;\r\n  }\r\n  .text {\r\n    width: 100%;\r\n    height: 50px;\r\n    margin: 0 auto;\r\n  }\r\n  .result {\r\n    padding-bottom: 100px;\r\n    overflow: auto;\r\n    height: 200px;\r\n    .resultItem {\r\n      padding: 10px 15px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}