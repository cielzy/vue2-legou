{"version":3,"file":"js/101.06cd5568.js","mappings":"qJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,aAAa,CAACA,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,KAAK,YAAY,KAAK,aAAa,IAAIC,GAAG,CAAC,aAAaN,EAAIO,gBAAgB,GAAGL,EAAG,aAAa,CAACE,YAAY,OAAOC,MAAM,CAAC,YAAc,YAAYG,MAAM,CAACC,MAAOT,EAAIS,MAAOC,SAAS,SAAUC,GAAMX,EAAIS,MAAME,CAAG,EAAEC,WAAW,WAA2B,KAAfX,KAAKQ,MAAcP,EAAG,KAAK,CAACE,YAAY,UAAUJ,EAAIa,GAAIb,EAAIc,YAAY,SAASC,GAAM,OAAOb,EAAG,KAAK,CAACc,IAAID,EAAKE,GAAGb,YAAY,aAAaE,GAAG,CAAC,MAAQ,SAASY,GAAQ,OAAOlB,EAAImB,OAAOJ,EAAK,IAAI,CAACf,EAAIoB,GAAGpB,EAAIqB,GAAGN,EAAKO,QAAQ,IAAG,GAAGtB,EAAIuB,KAAKrB,EAAG,KAAK,CAACF,EAAIoB,GAAG,aAAalB,EAAG,MAAM,CAACG,MAAM,CAAC,GAAK,gBAAgB,EACnrB,EACImB,EAAkB,GCkBtB,G,QAAA,CACAC,OACA,OACAhB,MAAAA,GACAiB,KAAAA,GACAZ,WAAAA,GAEA,EACAa,MAAAA,CACAlB,QAEA,aACA,6BACA,OACAmB,KAAAA,OAAAA,qBAAAA,WACA,OAEAF,KAAAA,EAAAA,MAGA,2BAEAG,EAAAA,OAAAA,EAAAA,OAAAA,SAAAA,EAAAA,GAEAC,EAAAA,WAAAA,EAAAA,IACA,GACA,IAGAF,KAAAA,OAAAA,qBAAAA,WACA,OAEAF,KAAAA,EAAAA,MAGA,2BAEAG,EAAAA,OAAAA,EAAAA,OAAAA,SAAAA,EAAAA,GAEAC,EAAAA,WAAAA,EAAAA,IACA,GACA,GAEA,GAEAC,QAAAA,CAEAxB,cACA,mBAAAe,KAAAA,QACA,EAEAH,OAAAA,GACA,mBAAAG,KAAAA,SACA,oCACA,GAEAU,UACA,mCACA,OAEA,WACA,gCACAC,KAAAA,GACAC,OAAAA,CAAAA,EAAAA,SAAAA,IAAAA,EAAAA,SAAAA,OAEA,mBACAC,SAAAA,CAAAA,EAAAA,SAAAA,IAAAA,EAAAA,SAAAA,OAEAC,EAAAA,IAAAA,EACA,MAEA,+BACAR,KAAAA,OAAAA,mBAAAA,WACA,0BACAS,EAAAA,cAAAA,SAAAA,EAAAA,GACA,gCAEAP,EAAAA,KAAAA,EAAAA,KAEA,GACA,GACA,CACA,ICtG8P,I,UCQ1PQ,GAAY,OACd,EACAvC,EACAyB,GACA,EACA,KACA,WACA,MAIF,EAAec,EAAiB,O","sources":["webpack://legou/./src/views/map/index.vue","webpack://legou/src/views/map/index.vue","webpack://legou/./src/views/map/index.vue?4d18","webpack://legou/./src/views/map/index.vue?4f69"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"box\"},[_c('van-sticky',[_c('van-nav-bar',{attrs:{\"title\":\"乐购\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}})],1),_c('van-search',{staticClass:\"text\",attrs:{\"placeholder\":\"请输入搜索关键词\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),(this.value !== '')?_c('ul',{staticClass:\"result\"},_vm._l((_vm.searchList),function(item){return _c('li',{key:item.id,staticClass:\"resultItem\",on:{\"click\":function($event){return _vm.goHome(item)}}},[_vm._v(_vm._s(item.name))])}),0):_vm._e(),_c('h2',[_vm._v(\"显示当前位置：\")]),_c('div',{attrs:{\"id\":\"container\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"box\">\r\n    <!-- 导航栏 -->\r\n    <van-sticky>\r\n      <van-nav-bar title=\"乐购\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\r\n    </van-sticky>\r\n    <!-- 搜索款 -->\r\n    <van-search v-model=\"value\" placeholder=\"请输入搜索关键词\" class=\"text\" />\r\n    <!-- 搜索结果 -->\r\n    <ul class=\"result\" v-if=\"this.value !== ''\">\r\n      <li v-for=\"item in searchList\" :key=\"item.id\" class=\"resultItem\" @click=\"goHome(item)\">{{ item.name }}</li>\r\n    </ul>\r\n    <!-- title -->\r\n    <h2>显示当前位置：</h2>\r\n    <!-- 地图 -->\r\n    <div id=\"container\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      value: '', // 搜索框keyword\r\n      city: '', // 默认地址\r\n      searchList: [] // 根据keyword的相关搜索列表\r\n    }\r\n  },\r\n  watch: {\r\n    value() {\r\n      // 判断之前是否点击了搜索里的定位  如果有  显示的就是之前点击的地点信息  没有就显示默认消息\r\n      const _this = this\r\n      const info = this.$store.state.cityInfo\r\n      if (info.name) {\r\n        AMap.plugin('AMap.AutoComplete', function () {\r\n          var autoOptions = {\r\n            //city 限定城市，默认全国  之前点击过的城市\r\n            city: info.name\r\n          }\r\n          // 实例化AutoComplete\r\n          var autoComplete = new AMap.AutoComplete(autoOptions)\r\n          // 根据关键字进行搜索   _this.value 搜索关键词\r\n          autoComplete.search(_this.value, function (status, result) {\r\n            // 搜索成功时，result即是对应的匹配数据\r\n            _this.searchList = result.tips\r\n          })\r\n        })\r\n      } else {\r\n        // JSAPI 2.0 输入提示插件名称由 AMap.Autocomplete 变更为 AMap.AutoComplete 啦！\r\n        AMap.plugin('AMap.AutoComplete', function () {\r\n          var autoOptions = {\r\n            //city 限定城市，默认全国   默认地址的城市\r\n            city: _this.city\r\n          }\r\n          // 实例化AutoComplete\r\n          var autoComplete = new AMap.AutoComplete(autoOptions)\r\n          // 根据关键字进行搜索  _this.value 搜索关键词\r\n          autoComplete.search(_this.value, function (status, result) {\r\n            // 搜索成功时，result即是对应的匹配数据\r\n            _this.searchList = result.tips\r\n          })\r\n        })\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击返回\r\n    onClickLeft() {\r\n      this.$router.push({ name: 'home' })\r\n    },\r\n    // 点击地址返回首页并将首页的地址更改\r\n    goHome(item) {\r\n      this.$router.push({ name: 'home' })\r\n      this.$store.commit('saveCityInfo', item)\r\n    }\r\n  },\r\n  mounted() {\r\n    const info = this.$store.state.cityInfo\r\n    const _this = this\r\n    // 判断之前是否点击了搜索里的定位  如果有  显示的就是之前点击的地点信息  没有就显示默认消息\r\n    if (info.name) {\r\n      var map = new AMap.Map('container', {\r\n        zoom: 16,\r\n        center: [info.location.lng, info.location.lat] //中心点坐标\r\n      })\r\n      var marker = new AMap.Marker({\r\n        position: [info.location.lng, info.location.lat] //位置\r\n      })\r\n      map.add(marker) //添加到地图\r\n    } else {\r\n      // 默认地址信息\r\n      var map = new AMap.Map('container', {})\r\n      AMap.plugin('AMap.CitySearch', function () {\r\n        var citySearch = new AMap.CitySearch()\r\n        citySearch.getLocalCity(function (status, result) {\r\n          if (status === 'complete' && result.info === 'OK') {\r\n            // 查询成功，result即为当前所在城市信息\r\n            _this.city = result.city\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.box {\r\n  h2 {\r\n    position: fixed;\r\n    bottom: 200px;\r\n    padding: 0 0 15px 15px;\r\n  }\r\n  #container {\r\n    width: 100%;\r\n    height: 200px;\r\n    position: fixed;\r\n    bottom: 0;\r\n  }\r\n  .text {\r\n    width: 100%;\r\n    height: 50px;\r\n    margin: 0 auto;\r\n  }\r\n  .result {\r\n    overflow: auto;\r\n    height: 320px;\r\n    .resultItem {\r\n      padding: 10px 15px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7d32ca6c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7d32ca6c&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d32ca6c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","onClickLeft","model","value","callback","$$v","expression","_l","searchList","item","key","id","$event","goHome","_v","_s","name","_e","staticRenderFns","data","city","watch","AMap","autoComplete","_this","methods","mounted","zoom","center","position","map","citySearch","component"],"sourceRoot":""}