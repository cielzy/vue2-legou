"use strict";(self["webpackChunklegou"]=self["webpackChunklegou"]||[]).push([[957],{8957:function(t,e,s){s.r(e),s.d(e,{default:function(){return w}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("van-nav-bar",{attrs:{title:"乐购","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("form",{attrs:{action:"/"}},[e("van-search",{attrs:{"show-action":"",placeholder:t.defaultKeyword.keyword},on:{search:t.onSearch,cancel:t.onCancel,input:t.getPromptInfo},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),1===t.show?e("div",[0!==t.historyData.length?e("div",{staticClass:"history1"},[e("div",{staticClass:"header"},[e("p",[t._v("历史记录")]),e("img",{attrs:{src:s(7153),alt:""},on:{click:t.deteleSearch}})]),e("div",{staticClass:"historyItem"},t._l(t.historyData,(function(s){return e("div",{key:s.id,staticClass:"historyItem1",on:{click:function(e){return t.onSearch(s.keyword)}}},[t._v(t._s(s.keyword))])})),0)]):t._e(),e("div",{staticClass:"hotSearch"},[e("p",[t._v("热门搜索")]),e("div",{staticClass:"hotSearchItem"},t._l(t.hotKeywordList,(function(s){return e("div",{key:s.keyword,staticClass:"hotSearchItem1",class:1===s.is_hot?"active":"",on:{click:function(e){return t.onSearch(s.keyword)}}},[t._v(t._s(s.keyword))])})),0)])]):2===t.show?e("div",{staticClass:"input"},[0===t.keywords.length?e("p",{staticClass:"noGoods"},[t._v("数据库暂无此类产品...")]):t._l(t.keywords,(function(s){return e("p",{key:s.id,staticClass:"item",on:{click:function(e){return t.goGoods(s.name)}}},[t._v(t._s(s.name))])}))],2):e("div",{staticClass:"goods"},[e("div",{staticClass:"category"},[e("div",{class:{active:1===t.isActive},on:{click:function(e){return t.changeItem(1)}}},[t._v("综合")]),e("div",{staticClass:"price",class:{active:2===t.isActive},on:{click:function(e){return t.changeItem(2)}}},[t._v(" 价格 "),e("div",{staticClass:"icons"},[e("van-icon",{attrs:{name:"arrow-up",color:2===this.isActive&&"up"===t.arrow?"#b4282d":""}}),e("van-icon",{attrs:{name:"arrow-down",color:2===this.isActive&&"down"===t.arrow?"#b4282d":""}})],1)]),e("div",{class:{active:3===t.isActive},on:{click:function(e){return t.changeItem(3)}}},[t._v("分类")])]),e("div",{staticClass:"content"},t._l(t.keywords,(function(s){return e("div",{key:s.id,staticClass:"item",on:{click:function(e){return t.goDetail(s.id)}}},[e("img",{attrs:{src:s.list_pic_url,alt:""}}),e("p",{staticClass:"name"},[t._v(t._s(s.name))]),e("p",{staticClass:"price"},[t._v(t._s(s.retail_price))])])})),0)])],1)},o=[],r=(s(7658),s(8859));function a(t){return(0,r.Z)({url:"/search/indexaction",method:"get",params:t})}function n(t){return(0,r.Z)({url:"/search/clearhistoryAction",method:"post",data:t})}function c(t){return(0,r.Z)({url:"/search/addhistoryaction",method:"post",data:t})}function h(t){return(0,r.Z)({url:"/search/helperaction",method:"get",params:t})}var d={data(){return{value:"",hotKeywordList:[],historyData:[],defaultKeyword:{},openId:"",show:1,order:"",keywords:[],isActive:"",newValue:""}},methods:{onSearch(t){c({openId:this.openId,keyword:this.value||t}).then((t=>{this.getSearchInfo(),this.value=""})),""===this.value&&(this.show=1)},getSearchInfo(){this.openId=localStorage.getItem("openId"),a({openId:this.openId}).then((t=>{this.hotKeywordList=t.hotKeywordList,this.historyData=t.historyData,this.defaultKeyword=t.defaultKeyword}))},onCancel(){this.$router.push("/home")},onClickLeft(){this.$router.go(-1)},deteleSearch(){n({openId:this.openId}).then((t=>{this.getSearchInfo()}))},getPromptInfo(){this.show=2,this.getPrompt(),""===this.value&&(this.show=1)},getPrompt(){h({keyword:this.value,order:this.order}).then((t=>{this.keywords=t.keywords}))},getNewInfo(){h({keyword:this.newValue,order:this.order}).then((t=>{this.keywords=t.keywords}))},goGoods(t){this.show=3,this.isActive=1,this.newValue=t,this.getNewInfo()},changeItem(t){this.isActive=t,1===this.isActive&&(this.order="",this.getNewInfo()),2===this.isActive&&""===this.arrow?(this.arrow="up",this.order="asc"):2===this.isActive&&"up"===this.arrow?(this.arrow="down",this.order="desc"):(this.arrow="up",this.order="asc"),this.getNewInfo(),3===this.isActive&&this.getNewInfo()},goDetail(t){this.$router.push({name:"goodsdetail",params:{id:t}})}},created(){this.show=1,this.getSearchInfo()}},l=d,u=s(1001),v=(0,u.Z)(l,i,o,!1,null,"0e268ab0",null),w=v.exports},7153:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAALVBMVEVmZmZtbW1ubm5wcHCJiYmKioqOjo6Tk5OUlJSVlZXm5ubn5+fv7+/y8vL////PAON/AAAAa0lEQVQ4y2N4hwsw0F8mgIGBgRWrDAMIoMokMKADNoIy6O5gwCAHgUwoThkGEmWexiFTyDIP+JCpUZmBkXnqh0wRH9shA5dGBe4hSbxlRJJpqEGSOcmBJLMYJS9aIcm8noQkobluoModNAAADGfUnhuYO1kAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=957.ba8f8d31.js.map