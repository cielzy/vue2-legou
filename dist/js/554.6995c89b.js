"use strict";(self["webpackChunklegou"]=self["webpackChunklegou"]||[]).push([[554],{9554:function(t,s,i){i.r(s),i.d(s,{default:function(){return _}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("van-sticky",[s("van-nav-bar",{attrs:{title:"标题","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),s("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.gallery,(function(t){return s("van-swipe-item",{key:t.id,staticClass:"swiperItem"},[s("img",{attrs:{src:t.img_url}})])})),1),t._m(0),s("div",{staticClass:"info"},[s("p",{staticClass:"name"},[t._v(t._s(t.info.name))]),s("p",{staticClass:"title"},[t._v(t._s(t.info.goods_brief))]),s("p",{staticClass:"price"},[t._v("￥"+t._s(t.info.retail_price))]),s("div",{staticClass:"eject"},[s("van-cell",{staticClass:"choose",attrs:{"is-link":""},on:{click:t.showPopup}},[t._v(" 请选择规格数量 ")]),s("van-popup",{staticClass:"content",style:{height:"35%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.info.primary_pic_url}}),s("div",{staticClass:"leftTitle"},[s("p",{staticClass:"price"},[t._v("价格￥"+t._s(t.info.retail_price))]),s("p",{staticClass:"num"},[t._v("请选择数量")])])]),s("div",{staticClass:"right"},[s("van-icon",{attrs:{name:"cross"},on:{click:function(s){t.show=!1}}})],1)]),s("div",{staticClass:"count"},[s("p",[t._v("数量")]),s("van-stepper",{attrs:{integer:""},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1)])],1)]),s("div",{staticClass:"attr"},[s("h2",[t._v("商品参数")]),t._l(t.attribute,(function(i){return s("div",{key:i.name,staticClass:"item"},[s("p",[t._v(t._s(i.name))]),s("span",[t._v(t._s(i.value))])])}))],2),s("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.info.goods_desc)}}),s("div",{staticClass:"question"},[s("p",{staticClass:"title"},[t._v("———— 常见问题 ————")]),t._l(t.issue,(function(i){return s("div",{key:i.id,staticClass:"item"},[s("span",{staticClass:"spot"}),s("div",[t._v(t._s(i.question))]),s("p",[t._v(t._s(i.answer))])])}))],2),s("div",{staticClass:"see"},[s("p",[t._v("————— 大家都在看 ————")]),s("div",{staticClass:"body"},t._l(t.productList,(function(i){return s("div",{key:i.id,staticClass:"item"},[s("img",{attrs:{src:i.list_pic_url}}),s("p",{staticClass:"name"},[t._v(t._s(i.name))]),s("p",{staticClass:"price"},[t._v("￥"+t._s(i.retail_price))])])})),0)]),s("div",{staticClass:"footer"},[s("div",[s("van-icon",{staticClass:"star",attrs:{name:"star-o",size:"23",color:"red"},on:{click:t.addCollecthanderler}})],1),s("div",[s("van-icon",{staticClass:"cart",attrs:{name:"cart-o",size:"31",badge:t.length},on:{click:t.goCart}})],1),s("div",{on:{click:t.buyNow}},[t._v("立即购买")]),s("div",{staticClass:"join",on:{click:function(s){return t.addCart()}}},[t._v("加入购物车")])])],1)},e=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"title"},[s("p",[t._v("✔30天无忧退货")]),s("p",[t._v("✔48小时快速退款")]),s("p",[t._v("✔满88元免邮费")])])}],o=(i(7658),i(8859));function n(t){return(0,o.Z)({url:"/goods/detailaction",method:"get",params:t})}function l(t){return(0,o.Z)({url:"/collect/addcollect",method:"post",data:t})}function r(t){return(0,o.Z)({url:"/cart/addCart",method:"post",data:t})}var c=i(8517),d=i(756),u={data(){return{gallery:[],info:{},show:!1,value:1,attribute:[],issue:[],productList:[],length:"",list:[]}},methods:{getList(){const t=this.$route.params.id,s=this.$store.state.goodsId,i=localStorage.getItem("openId");n({id:t||s,openId:i}).then((t=>{this.gallery=t.gallery,this.info=t.info,this.attribute=t.attribute,this.issue=t.issue,this.productList=t.productList}))},onClickLeft(){this.$router.go(-1)},showPopup(){this.show=!0},addCollecthanderler(){const t=this.$route.params.id,s=localStorage.getItem("openId");l({goodsId:t,openId:s}).then((t=>{d.Z.success("添加成功")}))},addCart(){if(this.show){const t=this.$route.params.id,s=localStorage.getItem("openId"),i=this.value;r({goodsId:t,openId:s,number:i}).then((s=>{d.Z.success("添加购物车成功");const i=this.list.every((s=>s!==t));console.log(i),i&&this.length++,this.getCartInfo()}))}else this.show=!0},cartList(){const t=localStorage.getItem("openId");(0,c.V)({openId:t}).then((t=>{this.list=t.data.map((t=>t.goods_id))}))},goCart(){this.$router.push("/cart")},buyNow(){this.show?this.$router.push("/order"):this.show=!0},getCartInfo(){const t=localStorage.getItem("openId");(0,c.V)({openId:t}).then((t=>{this.length=t.data.length,localStorage.setItem("length",length)}))}},created(){this.getList(),this.cartList(),this.getCartInfo()}},p=u,h=i(1001),v=(0,h.Z)(p,a,e,!1,null,"67f2244a",null),_=v.exports}}]);
//# sourceMappingURL=554.6995c89b.js.map